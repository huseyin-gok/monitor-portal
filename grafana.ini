# Grafana Configuration for Customer Portal
# Bu dosyayı /etc/grafana/grafana.ini içine kopyalayın veya özel config dosyası olarak kullanın

[server]
# Direkt Grafana erişimi (NGINX reverse proxy yok)
domain = monitor.sirket.com.tr
root_url = http://192.168.200.242:3000/
serve_from_sub_path = false

# HTTP ayarları
protocol = http
http_addr = 0.0.0.0  # Tüm interface'lerden erişim
http_port = 3000

[security]
# iframe embedding için gerekli
allow_embedding = true

# Anonymous auth - iframe için açık olmalı (folder bazlı yetkilendirme ile güvenli)
allow_anonymous = true

# Anonymous kullanıcı rolü (Viewer = sadece görüntüleme)
anonymous_role = Viewer

# Cookie güvenliği
# HTTP kullanıyorsanız cookie_secure = false
cookie_secure = false

# iframe embedding için cookie_samesite = lax olmalı (strict çalışmaz)
cookie_samesite = lax

# X-Frame-Options header'ını devre dışı bırak (allow_embedding ile birlikte)
# NOT: Grafana'nın bazı versiyonlarında bu ayar gerekli olmayabilir
# Ama X-Frame-Options hatası alıyorsanız, Grafana'yı yeniden başlatın

[users]
# Viewer kullanıcılar için varsayılan ayarlar
viewers_can_edit = false
viewers_can_admin = false

[auth]
# Anonymous auth kapalı
disable_login_form = false
disable_signout_menu = false

[auth.anonymous]
# iframe embedding için anonymous auth açık
enabled = true
org_role = Viewer
# Organization ID (org_name yerine org_id kullan, daha güvenilir)
org_id = 1
# Anonymous kullanıcılar için kiosk modu desteği
hide_version = true

[datasources]
# Zabbix datasource zaten yapılandırılmış olmalı

[folders]
# Folder bazlı yetkilendirme aktif
enable_alpha = false

[panels]
# Panel ayarları
enable_alpha = false

[log]
mode = console file
level = info

[log.console]
level = info

[log.file]
level = info
log_rotate = true
max_lines = 1000000
max_size_shift = 28
daily_rotate = true
max_days = 7

